<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<body>
<h1 th:utext="${title}">..!..</h1>
<h2 th:utext="${message}">..!..</h2>

<table border="1">
    <tr>
        <th>Заголовок</th>
        <th>Текст</th>
        <th>Автор</th>
        <th></th>
    </tr>
    <tr th:each="task : ${tasks}">
        <td th:utext="${task.title}">...</td>
        <td th:utext="${task.text}">...</td>
        <td th:utext="${task.author}">...</td>
        <td>
            <button class="btn-delete" th:id="${task.id}">Удалить</button>
        </td>
    </tr>
</table>

<br>
<br>

<form th:action="@{/addTask}"
      th:object="${taskForm}" method="POST">
    <table>
        <tr>
            <th>Заголовок</th>
            <td>
                <input type="text" th:field="*{title}"/>
            </td>
        </tr>
        <tr>
            <th>Текст</th>
            <td>
                <input type="text" th:field="*{text}"/>
            </td>
        </tr>
        <tr>
            <th>Автор</th>
            <td>
                <input type="text" th:field="*{author}"/>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="submit" value="Добавить"/>
            </td>
        </tr>
    </table>
</form>

<div th:if="${errorMessage}" th:utext="${errorMessage}"
     style="color:red;font-style:italic;">
    ...
</div>

<div th:replace="fragments/footer :: footer"></div>

<script>
    $(document).ready(function () {
        // здесь код скрипта, где в $ будет находиться объект, предоставляющий доступ к функциям jQuery
        $(".btn-delete").click(function (event) {
            $.post("/tasks/delete/" + event.target.id, {}, function (data) {
                // перезагружаем страницу
                location.reload()
            });
        });
    });
</script>

</body>
</html>
